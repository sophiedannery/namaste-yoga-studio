{% extends 'base.html.twig' %}

{% block title %}Gérer les comptes élève
{% endblock %}

{% block body %}

	{% set now = date() %}


	<section class="py-5">
		<div class="container">


			<h1 class="hero-heading mb-5 mt-3 mt-md-0">Liste des cours</h1>

			<div class="table-responsive">
				<table class="table table-striped table-hover">
					<thead>
						<tr>
							<th>Date</th>
							<th>Horaires</th>
							<th>Professeur</th>
							<th>Cours</th>
							<th>Salle</th>
							<th>Statut</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for session in sessions %}

							{% set state = session.status == 'CANCELLED' ? 'CANCELLED' : (session.endAt < now ? 'FINISHED' : 'UPCOMING') %}

							<tr>
								<td>{{ session.startAt|date('d/m/Y') }}</td>
								<td>{{ session.startAt|date('H:i') }}
									–
									{{ session.endAt|date('H:i') }}</td>
								<td>{{ session.teacher.lastName }}
									{{ session.teacher.firstName }}</td>

								<td>{{ session.classType.title }}</td>
								<td>{{ session.room.nameRoom }}</td>
								<td>
									{% if state == 'CANCELLED' %}
										<span class="badge text-bg-danger">Annulé</span>
									{% elseif state == 'FINISHED' %}
										<span class="badge text-bg-secondary">Terminé</span>
									{% else %}
										<span class="badge text-bg-success">À venir</span>
									{% endif %}
								</td>
								<td>
									{# <form method="post" action="{{ path('app_student_delete', {'id': student.id}) }}" onsubmit="return confirm('Voulez-vous suspendre ce compte utilisateur ?');">
																																																																																																																																																				<input type="hidden" name="_token" value="{{ csrf_token('delete_student' ~ student.id) }}">
																																																																																																																																																				<button class="btn  btn-outline-primary px-4 me-md-2">Suspendre</button>
																																																																																																																																																			</form> #}
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="9">Pas de cours.</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			<div class="text-center m-5">
				<a class="btn btn-outline-primary px-4 me-md-2" href="{{ path('app_admin')}}">Retour</a>
			</div>
		</div>
	</section>
{% endblock %}
